

<div id="content">
    <div class="row">
        <sa-big-breadcrumbs [items]="[' setting', 'Directory']" icon="table" class="col-xs-12 col-sm-7 col-md-7 col-lg-4"></sa-big-breadcrumbs>
    </div>
    <!-- widget grid -->
    <sa-widgets-grid>
        <div class="row">
            <article class="col-sm-12 col-md-12 col-lg-12">
                <div sa-widget [editbutton]="false" [fullscreenbutton]="false"
                color="white">
                <header >
                 <span class="widget-icon"> <i class="fa fa-table"></i>
                 </span>
                 <h2>Directories</h2>
                 <div class="directory-btn">
                    <a class="add-btn-directory" (click)="ManageDirectorymodal.show()" (click)="clearDirectoryObject()"> <i
                     class="fa fa-plus"></i> <span class="hidden-mobile">Add</span>
                    </a> 
                 </div>
                </header>
                <div>
                 <div class="widget-body no-padding">
                    <div class="lightest-gray-bg">
                        <div class="row" style="padding: 4px 0px; margin-left: 80%">
                            <div class="col-md-12">
                               <div class="input-group">
                                           <div class="icon-addon">
                                     <input type="text" id="search" class="form-control"
                                     [(ngModel)]="controls.directory"
                                     placeholder='Type to filter the table...'
                                     (keyup)='updateFilterGroup($event)'> <label
                                        style="z-index: 22" for="search" class="fa fa-search"
                                        rel="tooltip" title="search"></label>
                                  </div>
                               </div>
                            </div>
                         </div >
                     <div align="center" *ngIf="handelResponse"><i class="fa fa-gear fa-4x fa-spin"></i></div>
                     <ngx-datatable   style="height: 50vh" #myTable
                     class="table striped" [columnMode]="'force'"  [headerHeight]="40"
                     [footerHeight]="45" [rowHeight]="50" [scrollbarV]="35" [scrollbarH]="true" 
                     [rows]="directories"
                     [cssClasses]="{
                     sortAscending: 'fa fa-sort-up',
                     sortDescending: 'fa fa-sort-down',
                     pagerLeftArrow: 'fa  fa-angle-left',
                     pagerRightArrow: 'fa fa-angle-right',
                     pagerPrevious: 'fa fa-angle-double-left',
                     pagerNext: 'fa fa-angle-double-right'
                     }">
                     <!-- Column Templates -->
                    
                     <ngx-datatable-column  name="Action" [resizeable]="true"
                     [sortable]="true" [draggable]="true" [width]="55" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <div>
                       <i class="fa fa-edit" (click)="editDiretcory(row)" (click)="ManageDirectorymodal.show()"></i> &nbsp;&nbsp;<i
                          class="fa fa-trash" (click)="deleteDirectory(row)"></i>
                      </div>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column  name="Status"
                     [resizeable]="true" [sortable]="true" [width]="70" [draggable]="true"
                     [canAutoResize]="true"> 
                     <ng-template let-row="row" ngx-datatable-cell-template>
                      <div>
                       <span  class="activestatus font" >Active</span> 
                   
                      </div>
                     </ng-template>
                     </ngx-datatable-column> 
                     <ngx-datatable-column
                     name="Name"  [resizeable]="true"   [width]="100"  [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" ngx-datatable-cell-template>
                      <p (click)="getRowData(row)">{{row.name}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Host"  [resizeable]="true"  [width]="200" [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)"> {{row.host}}</p>
                     </ng-template>
                     </ngx-datatable-column> 
                     <ngx-datatable-column
                     name="Port"  [resizeable]="true"  [width]="50"  [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)">{{row.port}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="URL"  [width]=130 [resizeable]="true"   [width]="150"  [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)">{{row.url}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Crone"  [resizeable]="true" [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)"> {{row.cron}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Type"  [resizeable]="true"   [width]="80"  [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)"> {{row.type}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Synch Type"  [resizeable]="true"  [width]="85" [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)">{{row.syncType}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Root DN"  [resizeable]="true" [width]="150" [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)"> {{row.rootDn}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Base DN Value"   [width]="150" [resizeable]="true" [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)"> {{row.baseDn}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Category"  [resizeable]="true"  [width]="80" [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)"> {{row.category}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Description"  [resizeable]="true" [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <p (click)="getRowData(row)"> {{row.description}}</p>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Sync"  [resizeable]="true" [sortable]="true"
                     [draggable]="true"  [width]=100 [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <div>
                       <span class="btn bg-color-green txt-color-white btn-xs" (click)="syncDirectory(row)">Sync</span> 
                      </div>
                     </ng-template>
                     </ngx-datatable-column>
                     <ngx-datatable-column
                     name="Import Group"   [resizeable]="true" [width]=130 [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <div>
                       <span class="btn bg-color-green txt-color-white btn-xs" (click)="importGroup(row.name)">ImportGroups</span> 
                      </div>
                     </ng-template>
                     </ngx-datatable-column>
                     
                     <ngx-datatable-column
                     name="Import User"   [resizeable]="true" [width]=100 [sortable]="true"
                     [draggable]="true" [canAutoResize]="true">
                     <ng-template let-row="row" let-value="value"
                      ngx-datatable-cell-template>
                      <div>
                       <span class="btn bg-color-green txt-color-white btn-xs" (click)="importUser(row.name)">ImportUsers</span> 
                      </div>
                     </ng-template>
                     </ngx-datatable-column>
                     
                     </ngx-datatable>
                    
                    </div>
                 </div>
                </div>
              </div>
            </article>
            <article class="col-sm-12 col-md-12 col-lg-12">
                <div sa-widget [colorbutton]="true" [editbutton]="false" [togglebutton]="true" [deletebutton]="true" [fullscreenbutton]="false" [custombutton]="false">
                    <!-- widget options:
                               usage: <div sa-widget id="wid-id-0" [editbutton]="false">
                               [colorbutton]="false"
                               [editbutton]="false"
                               [togglebutton]="false"
                               [deletebutton]="false"
                               [fullscreenbutton]="false"
                               [custombutton]="false"
                               [collapsed]="true"
                               [sortable]="false"
                               -->
                        <header>
                        <ul id="widget-tab-1" class="nav pull-left" [ngClass]="{'nav-tabs' : !demoShowTabs, 'nav-pills': demoShowTabs }">
                            <li class="active">
                                <a data-toggle="tab" href="#userDetailsTab" > <i class="fa fa-lg fa-arrow-circle-o-down"></i> <span class="hidden-mobile hidden-tablet">User  </span> </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#groupDetailsTab"  > <i class="fa fa-lg fa-arrow-circle-o-up"></i> <span class="hidden-mobile hidden-tablet">  Group  </span></a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#ruleDetailsTab  " > <i class="fa fa-lg fa-arrow-circle-o-up"></i> <span class="hidden-mobile hidden-tablet"> Rules </span></a>
                            </li>
                        </ul>
                    </header>
                    <!-- widget div-->
                    <div>
                        <!-- widget content -->
                        <div class="widget-body no-padding">
                            <!-- widget body text-->
                            <div class="tab-content padding-10">
                                <div class="tab-pane fade in active" id="userDetailsTab">
                                    
                                    <div class="lightest-gray-bg">
                                            <div class=" btn-group-directory padding-5">
                                                    <button type="button" class="btn btn-sm btn-default fa fa-plus" >
                                                    Import all
                                                    </button>
                                                    <button type="button"  [disabled]="!responseTab"  class="btn btn-sm btn-default fa fa-arrow-down"  (click)="userMappingModal.show()">
                                                        User Mapping
                                                        </button>
                                                        
                                                 </div>
                                        <div class="row" style="padding: 4px 0px; margin-left: 82%">
                                            <div class="col-md-12">
                                               <div class="input-group">
                                                           <div class="icon-addon">
                                                     <input type="text" id="search" class="form-control"
                                                     [(ngModel)]="controls.user"
                                                     placeholder='Type to filter the table...'
                                                     (keyup)='updateFilterUser($event)'> <label
                                                        style="z-index: 22" for="search" class="fa fa-search"
                                                        rel="tooltip" title="search"></label>
                                                  </div>
                                               </div>
                                            </div>
                                         </div >
                               <ngx-datatable   style="height: 50vh" #myTable
                               class='table-striped' [columnMode]="'force'" [headerHeight]="40"
                               [footerHeight]="45" [rowHeight]="35" [scrollbarV]="35" [scrollbarH]="true"
                               [rows]="users"
                               [cssClasses]="{
                               sortAscending: 'fa fa-sort-up',
                               sortDescending: 'fa fa-sort-down',
                               pagerLeftArrow: 'fa  fa-angle-left',
                               pagerRightArrow: 'fa fa-angle-right',
                               pagerPrevious: 'fa fa-angle-double-left',
                               pagerNext: 'fa fa-angle-double-right'
                               }">
                               <!-- Column Templates --> 
                               
                             
                            
                              
                               <ngx-datatable-column
                               name="Name"  [resizeable]="true" [sortable]="true"
                               [draggable]="true" [canAutoResize]="true">
                               <ng-template let-row="row" ngx-datatable-cell-template>
                                  <p >{{row.firstName}}&nbsp;{{row.lastName}}</p>
                               </ng-template>
                               </ngx-datatable-column>
        
                               <ngx-datatable-column
                               name="Group code" [resizeable]="true" [sortable]="true"
                               [draggable]="true" [canAutoResize]="true">
                               <ng-template let-row="row" let-value="value"
                                  ngx-datatable-cell-template>
                                  <p > {{row.username}}</p>
                               </ng-template>
                               </ngx-datatable-column> 
        
                               <ngx-datatable-column
                               name="Group" [resizeable]="true" [sortable]="true"
                               [draggable]="true" [canAutoResize]="true">
                               <ng-template let-row="row" let-value="value"
                                  ngx-datatable-cell-template>
                                  <p> {{row.email}}</p>
                               </ng-template>
                               </ngx-datatable-column> 
        
                               <ngx-datatable-column
                               name="company" [resizeable]="true" [sortable]="true"
                               [draggable]="true" [canAutoResize]="true">
                               <ng-template let-row="row" let-value="value"
                                  ngx-datatable-cell-template>
                                  <p > {{row.phoneNum}}</p>
                               </ng-template>
                               </ngx-datatable-column> 
        
                               <ngx-datatable-column
                               name="Properties" [resizeable]="true" [sortable]="true"
                               [draggable]="true" [canAutoResize]="true">
                               <ng-template let-row="row" let-value="value"
                                  ngx-datatable-cell-template>
                                  <p > {{row.roleCode}}</p>
                               </ng-template>
                               </ngx-datatable-column> 
        
                              
                               </ngx-datatable>
                                    </div>
                                </div>
                                <!-- ******************######## GROUP DETAILS TAB #########**************** -->
                        <div class="tab-pane fade " id="groupDetailsTab">
                            <div class="lightest-gray-bg">
                                    <div class=" btn-group-directory padding-5">
                                            <button type="button" class="btn btn-sm btn-default fa fa-plus" >
                                          Import all
                                            </button>
                                            <button type="button" [disabled]="!responseTab" class="btn btn-sm btn-default fa fa-plus" (click)="groupMappingModal.show()" >
                                            Groups Mapping
                                                  </button>
                                                  
                                                
                                         </div>
                                <div class="row" style="padding: 4px 0px; margin-left: 82%">
                                    <div class="col-md-12">
                                       <div class="input-group">
                                                   <div class="icon-addon">
                                             <input type="text" id="search" class="form-control"
                                             [(ngModel)]="controls.group"
                                             placeholder='Type to filter the table...'
                                             (keyup)='updateFilterGroup($event)'> <label
                                                style="z-index: 22" for="search" class="fa fa-search"
                                                rel="tooltip" title="search"></label>
                                          </div>
                                       </div>
                                    </div>
                                 </div >
                       <ngx-datatable   style="height: 50vh" #myTable
                       class='table-striped' [columnMode]="'force'" [headerHeight]="40"
                       [footerHeight]="45" [rowHeight]="35" [scrollbarV]="35" [scrollbarH]="true"
                       [rows]="groups"
                       [cssClasses]="{
                       sortAscending: 'fa fa-sort-up',
                       sortDescending: 'fa fa-sort-down',
                       pagerLeftArrow: 'fa  fa-angle-left',
                       pagerRightArrow: 'fa fa-angle-right',
                       pagerPrevious: 'fa fa-angle-double-left',
                       pagerNext: 'fa fa-angle-double-right'
                       }">
                       <!-- Column Templates --> 
                       
                     
                 
                  
                       <ngx-datatable-column
                       name="Name"  [resizeable]="true" [sortable]="true"
                       [draggable]="true" [canAutoResize]="true">
                       <ng-template let-row="row" ngx-datatable-cell-template>
                          <p (click)="getMemberData(row.id)">{{row.name}}</p>
                       </ng-template>
                       </ngx-datatable-column>

                       <ngx-datatable-column
                       name="Group Code" [resizeable]="true" [sortable]="true"
                       [draggable]="true" [canAutoResize]="true">
                       <ng-template let-row="row" let-value="value"
                          ngx-datatable-cell-template>
                          <p (click)="getMemberData(row.id)"> {{row.code}}</p>
                       </ng-template>
                       </ngx-datatable-column> 

                       
                        <ngx-datatable-column
                       name="Company" [resizeable]="true" [sortable]="true"
                       [draggable]="true" [canAutoResize]="true">
                       <ng-template let-row="row" let-value="value"
                          ngx-datatable-cell-template>
                          <p (click)="getMemberData(row.id)"> {{row.created | date :'MM/dd/yyyy hh:mm'}}</p>
                       </ng-template>
                       </ngx-datatable-column>

                       <ngx-datatable-column
                       name="Properties" [resizeable]="true" [sortable]="true"
                       [draggable]="true" [canAutoResize]="true">
                       <ng-template let-row="row" let-value="value"
                          ngx-datatable-cell-template>
                          <p (click)="getMemberData(row.id)"> {{row.description}}</p>
                       </ng-template>
                       </ngx-datatable-column>
                       
                       </ngx-datatable>
                            </div>
               </div>
                                <!-- **********************### RULES TAB #####************************** -->
                        <div class="tab-pane fade " id="ruleDetailsTab">
                            <div class="lightest-gray-bg">

                          <div class=" btn-group-directory padding-5">
                    
                                     <button type="button" [disabled]="!responseTab" class="btn btn-sm btn-default fa fa-plus" (click)="addRuleModal.show()" >
                                     Add Rule
                                      </button>
                                            
                                                
                                         </div>
                                <div class="row" style="padding: 4px 0px; margin-left: 82%">
                                    <div class="col-md-12">
                                       <div class="input-group">
                                                   <div class="icon-addon">
                                             <input type="text" id="search" class="form-control"
                                             [(ngModel)]="controls.roles"
                                             placeholder='Type to filter the table...'
                                             (keyup)='updateFilterRoles($event)'> <label
                                                style="z-index: 22" for="search" class="fa fa-search"
                                                rel="tooltip" title="search"></label>
                                          </div>
                                       </div>
                                    </div>
                                 </div >
                              
                       <ngx-datatable   style="height: 50vh" #myTable
                       class='table-striped' [columnMode]="'force'" [headerHeight]="40"
                       [footerHeight]="45" [rowHeight]="35" [scrollbarV]="35" [scrollbarH]="true"
                       [rows]="rules"
                       [cssClasses]="{
                       sortAscending: 'fa fa-sort-up',
                       sortDescending: 'fa fa-sort-down',
                       pagerLeftArrow: 'fa  fa-angle-left',
                       pagerRightArrow: 'fa fa-angle-right',
                       pagerPrevious: 'fa fa-angle-double-left',
                       pagerNext: 'fa fa-angle-double-right'
                       }">
                       <!-- Column Templates --> 
                       
                       <ngx-datatable-column name="Action" [width]="10" [resizeable]="true"
                       [sortable]="true" [draggable]="true"  [canAutoResize]="true">
                       <ng-template let-row="row" let-value="value"
                          ngx-datatable-cell-template>
                          <div>
                             <i class="fa fa-edit" (click)="editRole(row)" (click)="addRoleModal.show()"></i> &nbsp;&nbsp;<i
                                class="fa fa-trash" (click)="deleteRole(row)"></i>
                          </div>
                       </ng-template>
                       </ngx-datatable-column>
                       
                       <ngx-datatable-column name="Status"
                    [resizeable]="true" [sortable]="true" [width]="10" [draggable]="true"
                        [canAutoResize]="true"> 
                     <ng-template let-row="row" ngx-datatable-cell-template>
                 <div>
                    <span class="activestatus font" >Active</span> 
                    
                 </div>
              </ng-template>
              </ngx-datatable-column> 
              
                       <ngx-datatable-column
                       name="Rule"  [resizeable]="true" [sortable]="true"
                       [draggable]="true" [canAutoResize]="true">
                       <ng-template let-row="row" ngx-datatable-cell-template>
                          <p >{{row.name}}</p>
                       </ng-template>
                       </ngx-datatable-column>
                       <ngx-datatable-column
                       name="Type"  [resizeable]="true" [sortable]="true"
                       [draggable]="true" [canAutoResize]="true">
                       <ng-template let-row="row" ngx-datatable-cell-template>
                          <p >{{row.type}}</p>
                       </ng-template>
                       </ngx-datatable-column>

                       <ngx-datatable-column
                       name="Description" [resizeable]="true" [sortable]="true"
                       [draggable]="true" [canAutoResize]="true">
                       <ng-template let-row="row" let-value="value"
                          ngx-datatable-cell-template>
                          <p> {{row.description}}</p>
                       </ng-template>
                       </ngx-datatable-column>
                       
                       </ngx-datatable>
                            </div>
                </div>
                            
                            
                            </div>
                        </div>
                    </div>
                </div>
            </article>
 
</div>
 </sa-widgets-grid>
</div>
<!--delete-->
<p-confirmDialog></p-confirmDialog>
<!--delete-->

<!-- ############################### MODALS ##################################### -->

<!-- ############################### ADD GROUP MODAL ##################################### -->
<div class="ManageDirectorymodal" id="ManageDirectorymodal" #ManageDirectorymodal  data-backdrop="static">
    <div bsModal #ManageDirectorymodal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog-ManageDirectory modal-lg">
            <div class="modal-content" >
                <div class="modal-header">
                    <button type="button" class="close" (click)="ManageDirectorymodal.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title"> Manage Directory</h4>
                </div>
                <div class="modal-body">
                    <form id="smart-form-information" class="smart-form client-form" #generalForm="ngForm">
                        <fieldset>
                            
                                    <section >
                                            <label class="input"> Name <span class="text-danger">*</span>
                                                <input type="text" required [(ngModel)]="directory.name" name="name" placeholder="name" #name="ngModel">
                                            </label>
                                        </section>
                                        <div class="row">
                                        <section class="col col-6">
                                                <label class="input"> Base Dn <span class="text-danger">*</span>
                                                    <input type="text" required [(ngModel)]="directory.baseDn" name="code" placeholder="baseDn" #baseDn="ngModel">
                                                </label>
                                            </section>   
                                            <section class="col col-6">
                                                <label class="input"> Root Dn<span class="text-danger">*</span>
                                                    <input type="text" required [(ngModel)]="directory.rootDn" name="rootDn" placeholder="rootDn" #rootDn="ngModel">
                                                </label>
                                            </section>    
                            </div>

                            <div class="row">
                                <section class="col col-6">
                                    <label class="select">Type <span class="text-danger">*</span>
                                        <select name="type" [(ngModel)]="directory.type" #type="ngModel">
                                            <option value="undefined" selected disabled>Select Type</option>
                                            <option value="openLDAP">openLDAP</option>
                                            <option value="AD">AD</option>
                                        
                                        </select>
                                    </label>
                                </section>
                                        <section  class="col col-6">
                                            <label class="select">Sync Type <span class="text-danger">*</span>
                                                <select name="syncType" [(ngModel)]="directory.syncType" #syncType="ngModel">
                                                    <option value="undefined" selected disabled>Select Sync Type</option>
                                                    <option *ngFor="let sync of syncTypeData"  value="sync.value">{{sync.key}}</option>
                                                </select>
                                            </label>
                                        </section>
                            </div>
            
                            <div class="row">
                                <section class="col col-6">
                                        <label class="input"> Root Password <span class="text-danger">*</span>
                                            <input type="text" required [(ngModel)]="directory.rootPassword" name="rootPassword" placeholder="rootPassword" #rootPassword="ngModel">
                                        </label>
                                    </section>   
                                    <section class="col col-6">
                                        <label class="input">Category<span class="text-danger">*</span>
                                            <input type="text" required [(ngModel)]="directory.category" name="category" placeholder="category" #category="ngModel">
                                        </label>
                                    </section>    
                    </div>
                    <section>
                        <label class="input">URL<span class="text-danger">*</span>
                            <input type="text" required [(ngModel)]="directory.url" name="url" placeholder="url" #url="ngModel">
                        </label>
                    </section>    
                    <div class="row">
                        <section class="col col-6">
                                <label class="input">PORT <span class="text-danger">*</span>
                                    <input type="number" required [(ngModel)]="directory.port" name="port" placeholder="port" #port="ngModel">
                                </label>
                            </section>   
                            <section class="col col-6">
                                <label class="input">HOST<span class="text-danger">*</span>
                                    <input type="text" required [(ngModel)]="directory.host" name="host" placeholder="host" #host="ngModel">
                                </label>
                            </section>    
                            </div>
                            <section>
                                    <label class="input"> Description <span class="text-danger">*</span></label>
                                        
                                     <textarea rows="4" cols="77" [(ngModel)]="directory.description" name="description" placeholder="Description" id="desc" #description="ngModel">
                                     </textarea>
                                    
                                </section>
                                  
                   
                           
                    
                        </fieldset>
                        <footer>
                            <div class="actions ">
                                <button type="button" class="btn btn-sm btn-primary " (click)="saveDirectory(directory);ManageDirectorymodal.hide()">
                                    Submit
                                </button>
                                <button type="button" class="btn btn-sm btn-default " (click)="ManageDirectorymodal.hide()">
                                Cancel
                                </button>

                            </div>
                        </footer>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- ############################### END ADD GROUP MODAL ##################################### -->

<!-- ############################### USER MAPPING MODAL ##################################### -->
<div class="userMappingModal" id="userMappingModal" #userMappingModal  data-backdrop="static">
        <div bsModal #userMappingModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog-ManageDirectory modal-lg">
                <div class="modal-content" >
                    <div class="modal-header">
                        <button type="button" class="close" (click)="userMappingModal.hide()" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Add Mapping</h4>
                    </div>
                    <div class="modal-body">
                        <form id="smart-form-information" class="smart-form client-form" #generalForm="ngForm">
                            <fieldset>
                                    <table datatable="ng" dt-options="dtOptions" class="table table-striped table-bordered table-hover tadaTable" width="100%">
                                            <thead>
                                                <tr>
                                                    <th>Field</th>
                                                    <th>Mapping</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr  *ngFor="let data of userMappingData" style="cursor: pointer;">
                                                    <td>{{data.name}}</td>
                                                    <td><input type="text"  name="userMappingData" [(ngModel)]="data.value"/></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                   
                            </fieldset>
                            <footer>
                                <div class="actions ">
                                    <button type="button" class="btn btn-sm btn-primary " (click)="saveUserMapping(userMappingData);userMappingModal.hide()">
                                        Submit
                                    </button>
                                    <button type="button" class="btn btn-sm btn-default " (click)="userMappingModal.hide()">
                                    Cancel
                                    </button>
    
                                </div>
                            </footer>
                        </form>
    
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ############################### END USER MAPPING MODAL ##################################### -->

    <!-- ############################### GROUP MAPPING MODAL ##################################### -->
<div class="groupMappingModal" id="groupMappingModal" #groupMappingModal  data-backdrop="static">
        <div bsModal #groupMappingModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog-ManageDirectory modal-lg">
                <div class="modal-content" >
                    <div class="modal-header">
                        <button type="button" class="close" (click)="groupMappingModal.hide()" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Add Mapping</h4>
                    </div>
                    <div class="modal-body">
                        <form id="smart-form-information" class="smart-form client-form" #generalForm="ngForm">
                            <fieldset>
                                    <table datatable="ng" dt-options="dtOptions" class="table table-striped table-bordered table-hover tadaTable" width="100%">
                                            <thead>
                                                <tr>
                                                    <th>Field</th>
                                                    <th>Mapping</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr  *ngFor="let data of GroupMappingData" style="cursor: pointer;">
                                                    <td>{{data.name}}</td>
                                                    <td><input type="text"  name="GroupMappingData" [(ngModel)]="data.value"/></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                   
                            </fieldset>
                            <footer>
                                <div class="actions ">
                                    <button type="button" class="btn btn-sm btn-primary " (click)="saveGroupMapping(GroupMappingData);groupMappingModal.hide()">
                                        Submit
                                    </button>
                                    <button type="button" class="btn btn-sm btn-default " (click)="groupMappingModal.hide()">
                                    Cancel
                                    </button>
    
                                </div>
                            </footer>
                        </form>
    
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ############################### END GROUP MAPPING MODAL ##################################### -->
    

    
    <!-- ############################### ADD RULE  MODAL ##################################### -->
<div class="addRuleModal" id="addRuleModal" #addRuleModal  data-backdrop="static">
        <div bsModal #addRuleModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog-rule modal-lg">
                <div class="modal-content" >
                    <div class="modal-header">
                        <button type="button" class="close" (click)="addRuleModal.hide()" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Add Mapping</h4>
                    </div>
                    <div class="modal-body">
                            <form class="smart-form">
                                    <fieldset>
                                        <div class="form-group">
                                            <label class="control-label col-sm-3 col-md-3">Name</label>
                                            <section class="col-sm-9 col-md-9">
                                                <input type="text " class="form-control"  [ngModelOptions]="{standalone: true}" [(ngModel)]="newRule.name ">
                                            </section>
                                        </div>
                                    </fieldset>
                                </form>

                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <div class="btn-group">
                                            <h1>Expression Builder</h1>
                                        </div>
                                    </div>
                                    <div class="panel-body">
                                        <form class="smart-form" >
                                            <fieldset>
                                                <div class="row">
                                                    <section class="col col-md-1">
                                                        <div class="rule-condition-div">IF</div>
                                                    </section>
                                                    <section class="col col-md-3">
                                                        <label class="select">
                                                        <select name="month" [(ngModel)]="newRule.type"  [ngModelOptions]="{standalone: true}">
                                                            <option value="attribute" selected="">User attribute</option>
                                                            <option value="group">Group membership</option>
                                                        </select> <i></i> </label>
                                                    </section>
                                                    <section class="col col-md-3" *ngIf="newRule.type=='attribute'">
                                                        <label class="select">
                                                        <select [(ngModel)]="newRule.condition.name" [ngModelOptions]="{standalone: true}" >
                                                            <option value="">Select </option>
                                                            <option value="Name" >Name</option>
                                                        </select>
                                                        <i></i> </label>
                                                    </section>
                                                    <section class="col col-md-2" *ngIf="newRule.type=='attribute'">
                                                        <label class="select">
                                                        <select name="cond" [(ngModel)]="newRule.condition.op"  [ngModelOptions]="{standalone: true}">
                                                            <option value="equal" selected="">Equals</option>
                                                            <option value="startWith">Starts with</option>
                                                            <option value="contains">Contains</option>
                                                        </select> <i></i> </label>
                                                    </section>
                                                    <section class="col col-md-3" *ngIf="newRule.type=='attribute'">
                                                        <label class="input">
                                                            <input type="text" name="url" placeholder="Enter a value" [(ngModel)]="newRule.condition.value"  [ngModelOptions]="{standalone: true}">
                                                        </label>
                                                    </section>
                                                    <section class="col col-md-1" *ngIf="newRule.type=='group'" >
                                                        Any of
                                                    </section>
                                                    <section class="col col-md-6" *ngIf="newRule.type=='group'" >
                                                            <tags-input class="form-control input-lg" (onTagsChanged)="onTagsChanged($event)" [removeLastOnBackspace]="removeLastOnBackspace" [(ngModel)]="newRule.memberOfGroups" name="memberOfGroups" ></tags-input>
                                                    </section>
                                                </div>
                                                <div class="row">
                                                    <section class="col col-1">
                                                        <div class="rule-condition-div">THEN</div>
                                                    </section>
                                                    <section class="col col-2">
                                                        Assign to 
                                                    </section>
                                                    <section class="col col-9">
                                                        <label class="select">
                                                        <select [(ngModel)]="newRule.group" >
                                                            <option value="">Choose Group </option>
                                                            <option *ngFor=" let item of groupDirectories" value="{{item.name}}" selected="{{newRule.group == newRule.condition.name }}">{{item.name}}</option>
                                                        </select>
                                                         <i></i> </label>
                                                    </section>
                                                    
                                                </div>
                                            </fieldset>
                                        </form>
                                        <form class="smart-form" *ngIf="newRule.expression=='editor'">
                                            <fieldset>
                                                <div class="row">
                                                    <section class="col col-md-1">
                                                        <div class="rule-condition-div">IF</div>
                                                    </section>
                                                    <section class="col col-md-11">
                                                        <label class="textarea"> <textarea rows="4" placeholder="Enter an expression..." name="comment"></textarea> </label>
                                                    </section>
                                                </div>
                                                <div class="row">
                                                    <section class="col col-md-1">
                                                        <div class="rule-condition-div">THEN</div>
                                                    </section>
                                                    <section class="col col-md-2">
                                                        Assign to
                                                    </section>
                                                    <section class="col col-md-9">
                                                        <label class="select">
                                                        <select ng-options="let item as item.name for item of groupDirectories track by item.id" [(ngModel)]="newRule.group1">
                                                            <option value="" selected="selected">Choose Group</option>
                                                        </select> <i></i> </label>
                                                    </section>
                                                    
                                                </div>
                                            </fieldset>
                                        </form>
                                    </div>
                                </div>
                                <form class="smart-form">
                                    <fieldset>
                                        <div class="form-group">
                                            <label class="control-label col-sm-3 col-md-3">Exclude users </label>
                                            <section class="col-sm-9 col-md-9">
                                                    <tags-input class="form-control input-lg" (onTagsChanged)="onTagsChanged($event)" [removeLastOnBackspace]="removeLastOnBackspace" [(ngModel)]="tags" name="tags"></tags-input>
                                            </section>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-sm-3 col-md-3">Description </label>
                                            <section class="col-sm-9 col-md-9">
                                                <label class="textarea"> <textarea rows="4" placeholder="Enter a description..." [(ngModel)]="newRule.description"></textarea> </label>
                                            </section>
                                        </div>
                                    </fieldset>
                                </form>
                        <footer>
                                <div class="actions ">
                                    <button type="button" class="btn btn-sm btn-primary " (click)="saveGroupMapping(GroupMappingData);addRuleModal.hide()">
                                        Submit
                                    </button>
                                    <button type="button" class="btn btn-sm btn-default " (click)="addRuleModal.hide()">
                                    Cancel
                                    </button>
    
                                </div>
                            </footer>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ############################### END RULE MODAL ##################################### -->
